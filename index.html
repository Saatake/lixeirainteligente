<!DOCTYPE html>
<html>
<head>
  <title>Nível da Lixeira</title>
  <style>
    .level {
      font-size: 24px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Nível da Lixeira</h1>
  <div id="level" class="level">Carregando...</div>

  <script type="text/javascript">
    var apiKey = "HMKMBEFQ5VFKUD4A"; // Substitua com sua Read API Key do ThingSpeak
    var channelID = "2557355";  // Substitua com seu Channel ID do ThingSpeak

    function getLevelText(distance) {
      if (distance > 30) {
        return "Nenhum lixo";
      } else if (distance > 20) {
        return "Pouco lixo";
      } else if (distance > 10) {
        return "Bastante lixo";
      } else {
        return "Muito lixo";
      }
    }

    function fetchData() {
      var url = `https://api.thingspeak.com/channels/${channelID}/fields/1/last.json?api_key=${apiKey}`;

      fetch(url)
        .then(response => response.json())
        .then(data => {
          var distance = parseFloat(data.field1);
          var levelText = getLevelText(distance);
          document.getElementById('level').innerText = levelText;
        })
        .catch(error => console.error('Erro ao buscar dados:', error));
    }

    // Fetch data on page load
    fetchData();

    // Fetch data every 15 seconds
    setInterval(fetchData, 15000);
  </script>
</body>
</html>
